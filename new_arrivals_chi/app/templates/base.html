<!--
Project: new_arrivals_chi
File name: base.html
Associated Files:
    legal.html, home.html, main.py

Template for extension. Contains JavaScript function for language, HTML, and CSS formatting.

References: https://www.digitalocean.com/community/tutorials/how-to-add-authentication-to-your-app-with-flask-login
-->

<!DOCTYPE html>
<html lang="{{ language | escape }}">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>New Arrival Resource Portal</title>
    <link rel="stylesheet" href="https://fonts.googleapis.com/css2?family=Public+Sans:wght@400;700&display=swap">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.15.4/css/all.min.css">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.0/css/all.min.css">
    <!-- Original CSS -->
    <!-- <link rel="stylesheet" type="text/css" href="/static/css/main.css"> 
     -->
    <!-- Bootstrap CSS -->
    <link rel="stylesheet" type="text/css" href="static/assets/css/styles.css">
    {% block styles %}{% endblock %}
    <script src="https://code.jquery.com/jquery-3.6.0.min.js"></script>
</head>

<!-- Mobile screen friendly -->
<!-- Start Navigation -->
<header class="cds-header" role="banner">
    <body class="usa-mobile_nav-active" >
        <div class="cds-navbar">
        <button class="cds-menu-btn" onclick="menuToggleOn()" href="javascript:void(0)">MENU</button>
        </div>
        <nav role="navigation" class="cds-nav" id="Menu-cds-nav">
            <div class="cds-nav-inner">
                <button class="cds-nav-close" onclick="menuToggleOff()" href="javascript:void(0)">
                    <img src="static/assets/img/close.svg" alt="close">
                </button>
                <ul class="cds-nav-primary cds-accordion">
                    <li><button class="cds-nav-link" onclick="navigateTo('/', '{{ language | escape }}')"><span>{{ translations[language]['base']['home'] | escape }}</span></a></li>
                    {% if current_user.is_authenticated %}
                    <li><button class="cds-nav-link" onclick="navigateTo('/dashboard', '{{ language | escape }}')"><span>{{ translations[language]['base']['dashboard'] | escape }}</span></a></li>
                    <li><button class="cds-nav-link" onclick="navigateTo('/logout', '{{ language | escape }}')"><span>{{ translations[language]['base']['logout'] | escape }}</span></a></li>
                    {% endif %}
                    {% if not current_user.is_authenticated %}
                    <li><button class="cds-nav-link"  onclick="navigateTo('/login', '{{ language | escape }}')"><span>{{ translations[language]['util']['login'] | escape }}</span></a></li>
                    <li><button class="cds-nav-link"  onclick="navigateTo('/signup', '{{ language | escape }}')"><span>{{ translations[language]['base']['sign_up'] | escape }}</span></a></li>
                    {% endif %}
                    <li>
                        <form action="{{ url_for(request.endpoint, organization_id=organization_id) }}" method="GET">
                            <button type="submit" class="cds-nav-link"><span>
                                {% if language == 'es' %}
                                    English
                                {% else %}
                                    Espa√±ol
                                {% endif %}
                            </span></button>
                            <input type="hidden" name="lang" value="{{ 'es' if language == 'en' else 'en' | escape }}">
                        </form>
                    </li>
                </ul>		
            </div>
        </nav>
      </div>
   </body>
</header>



<div class="wrapper">
    <div class="container">
        {% block content %}
        {% endblock %}
    </div>
</div>

<p class="footer-links">
    <div class="container" style="vertical-align:bottom; padding-top: .5in;">
    <a onclick="navigateTo('{{ url_for('main.about') }}', '{{ language }}')" class="underline" style="cursor: pointer;">{{ translations[language]['base']['about_us'] | escape }}</a> <i class="fa-solid fa-user"></i>
    <span>|</span>
    <a onclick="location.href='https://docs.google.com/forms/d/1Zfx-A7nWsHYx5XxphdKF9KGtovePZ6x8ZkDw-bfFFd0/edit#responses'" class="underline" style="cursor: pointer;">{{ translations[language]['base']['report_error'] | escape }}</a> <i class="fas fa-bug"></i>
    <span>|</span>
    <span>{{ translations[language]['base']['note'] | escape }}</span><i class="fa-solid fa-shield"></i>
    </div> 
</p>

</html>


<script>
    function navigateTo(destination, language) {
        window.location.href = destination + '?lang=' + language;
    }

    function menuToggleOn() {
        var x = document.getElementById("Menu-cds-nav");
        if (x.className === "cds-nav") {
            x.className += " is-visible";
        }
    }

    function menuToggleOff() {
        var x = document.getElementById("Menu-cds-nav");
        if (x.className === "cds-nav is-visible") {
            x.className = "cds-nav";
        }
    }
</script>
