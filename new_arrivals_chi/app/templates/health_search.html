{% extends "base.html" %}

{% block content %}
<div class="wrapper">
    <h3>
        {{ translations[language]['health']['search_rec'] | escape }}
    </h3>
    <div>
        <select id="supplies">
            <option value="">{{ translations[language]['health']['supply_service'] | escape }}</option>
            {% set supplies_set = set() %}
            {% for row in services_info %}
                {% if row[0] not in supplies_set %}
                    {% set _ = supplies_set.add(row[0]) %}
                    <option value="{{ row[0] }}">{{ row[0] }}</option>
                {% endif %}
            {% endfor %}
        </select>

        <select id="neighborhood">
            <option value="">{{ translations[language]['health']['neighborhood'] | escape }}</option>
            {% set neighborhood_set = set() %}
            {% for row in services_info %}
                {% if row[1] not in neighborhood_set %}
                    {% set _ = neighborhood_set.add(row[1]) %}
                    <option value="{{ row[1] }}">{{ row[1] }}</option>
                {% endif %}
            {% endfor %}
        </select>

        <select id="organization">
            <option value="">{{ translations[language]['health']['organization'] | escape }}</option>
            {% set organization_set = set() %}
            {% for row in services_info %}
                {% if row[2] not in organization_set %}
                    {% set _ = organization_set.add(row[2]) %}
                    <option value="{{ row[2] }}">{{ row[2] }}</option>
                {% endif %}
            {% endfor %}
        </select>

        <select id="hours">
            <option value="">{{ translations[language]['health']['hours'] | escape }}</option>
            {% set hours_set = set() %}
            {% for row in services_info %}
                {% if row[4] not in hours_set %}
                    {% set _ = hours_set.add(row[4]) %}
                    <option value="{{ row[4] }}">{{ row[4] }}</option>
                {% endif %}
            {% endfor %}
        </select>
    </div>

    <table id="healthTable">
        <thead>
            <tr>
                <th class="table-header">{{ translations[language]['health']['supply_service'] | escape }}</th>
                <th class="table-header">{{ translations[language]['health']['neighborhood'] | escape }}</th>
                <th class="table-header">{{ translations[language]['health']['organization'] | escape }}</th>
                <th class="table-header">{{ translations[language]['health']['hours'] | escape }}</th>
            </tr>
        </thead>
        <tbody>
            {% for row in services_info %}
            <tr>
                <td>{{ row[0] }}</td>
                <td>{{ row[1] }}</td>
                <td><a href="#" onclick="navigateTo('{{ url_for('main.org', organization_id=row[3]) }}', '{{ language }}')">{{ row[2] }}</a></td>
                <td>{{ row[4] }}</td>
            </tr>
            {% endfor %}
        </tbody>
    </table>
</div>

    <script src="{{ url_for('static', filename='js/filter.js') }}"></script>
{% endblock %}
